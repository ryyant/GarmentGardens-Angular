<app-breadcrumb [pageName]="'viewAllProducts'"></app-breadcrumb>

<h3>All Products</h3>

<div class="card alignCenter">
  <p-dataView
    #dv
    [value]="products"
    [paginator]="true"
    [rows]="9"
    filterBy="name"
    [sortField]="sortField"
    [sortOrder]="sortOrder"
    layout="grid"
  >
    <ng-template pTemplate="header">
      <div class="dataHeader">
        <p-dropdown
          [options]="sortOptions"
          [(ngModel)]="sortKey"
          placeholder="Sort By"
          (onChange)="onSortChange($event)"
          [style]="{ 'min-width': '15em' }"
          class="glow"
        ></p-dropdown>
        <span>
          <i class="pi pi-search"></i>
          &nbsp;
          <input
            class="glow"
            type="search"
            pInputText
            placeholder="Search by Name"
          />
          <!-- INCOMPLETE -->
        </span>
      </div>
      <p-dataViewLayoutOptions
        style="width: 100%; text-align: center"
      ></p-dataViewLayoutOptions>
    </ng-template>

    <ng-template let-product pTemplate="listItem">
      <div
        class="product-list-item glow"
        (click)="showDialog(product)"
        style="cursor: pointer"
      >
        <img class="img" src="{{ product.imageLink }}" />
        <div class="product-list-detail">
          <div class="product-name">{{ product.name }}</div>
          <div class="product-description">{{ product.description }}</div>
          <p-rating
            [ngModel]="product.rating"
            [readonly]="true"
            [cancel]="false"
          ></p-rating>
          <i class="pi pi-tag product-category-icon"></i
          ><span class="product-category">{{ product.category.name }}</span>
        </div>
        <div class="product-list-action">
          <span class="product-price">${{ product.unitPrice }}</span>
          <!--           <p-button
            label="View Product"
            (onClick)="showDialog(product)"
          ></p-button> -->
          <!--                 <span [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span>
 -->
        </div>
      </div>
    </ng-template>

    <ng-template let-product pTemplate="gridItem">
      <div
        class="product-grid-item card glow"
        (click)="showDialog(product)"
        style="cursor: pointer"
      >
        <div class="product-grid-item-top">
          <div>
            <i class="pi pi-tag product-category-icon"></i>
            <span class="product-category">{{ product.category.name }}</span>
          </div>
          <!--                 <span [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span>
 -->
        </div>
        <div class="product-grid-item-content">
          <img class="img" src="{{ product.imageLink }}" />
          <div class="product-name">{{ product.name }}</div>
          <div class="product-description">{{ product.description }}</div>
          <p-rating
            [ngModel]="product.rating"
            [readonly]="true"
            [cancel]="false"
          ></p-rating>
        </div>
        <div class="product-grid-item-bottom">
          <span class="product-price">${{ product.unitPrice }}</span>
          <!--           <p-button
            label="View Product"
            (onClick)="showDialog(product)"
          ></p-button> -->
        </div>
      </div>
    </ng-template>
  </p-dataView>

  <p-dialog
    *ngIf="display"
    header="View Product Details"
    [(visible)]="display"
    [style]="{ width: '50vw' }"
    [modal]="true"
    [resizable]="false"
  >
    <div style="display: inline-block">
      <span>
        <h1 style="font-size: 40px;">
          {{ productToView.name }}
        </h1>
      </span>

      <table width="100%">
          <tr>
            <td style="width: 30%; margin: 20px;">
                <p>Product ID: {{ productToView.productId }}</p>
                <p>SKU Code: {{ productToView.skuCode }}</p>
                <img style="border-radius: 15px; margin: 20px;" src="{{ productToView.imageLink }}" />
            </td>
            <div style="text-align: left;">
                  <h2>Description:</h2>
                  <div class="ui-g-6">{{ productToView.description }}</div>
                &nbsp;
                  <div class="ui-g-6 boldText">Quantity On Hand</div>
                  <div class="ui-g-6">{{ productToView.quantityOnHand }}</div>
                &nbsp;
                <div class="ui-g">
                  <div class="ui-g-6 boldText">Unit Price</div>
                  <div class="ui-g-6">{{ productToView.unitPrice | currency }}</div>
                </div>
                &nbsp;
                <div class="ui-g">
                  <div class="ui-g-6 boldText">Category</div>
                  <div class="ui-g-6 boldText">
                    {{
                      productToView.category != null ? productToView.category.name : ""
                    }}
                  </div>
                </div>
                &nbsp;
                <div class="ui-g">
                  <div class="ui-g-6 boldText">Tag(s)</div>
                  <div class="ui-g-6">
                    <ul style="margin-left: 20px">
                      <li *ngFor="let tag of productToView.tags">{{ tag.name }}</li>
                    </ul>
                  </div>
                </div>
              </div>
        
            <td>

            </td>
          </tr>
      </table>

      
      <td width="50%" class="boldText">Quantity</td>
      <td>
        <input
          pInputText
          placeholder="1"
          id="username"
          type="text"
          name="username"
          #username="ngModel"
          [(ngModel)]="dummyValue"
          required="true"
        />
      </td>
      &nbsp;
      <td>
        <p-button
          icon="pi pi-shopping-cart"
          label="Add To Cart"
          (onClick)="addToCart(productToView)"
        >
        </p-button>
      </td>
    </div>
  </p-dialog>
</div>
